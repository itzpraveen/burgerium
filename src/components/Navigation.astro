---
const base = import.meta.env.BASE_URL.replace(/\/$/, '');
---

<nav class="navbar">
    <div class="container nav-content">
        <!-- Logo Section -->
        <a href="#home" class="brand-wrapper">
            <!-- Brand Mark Box -->
            <div class="logo-box">
                <img src={`${base}/logo.png`} alt="Burgerium" />
            </div>
        </a>

        <!-- Desktop Menu -->
        <div class="nav-menu">
            <a href="#home" class="nav-link active">Home</a>
            <a href="#about" class="nav-link">The Story</a>
            <a href="#menu" class="nav-link">Our Menu</a>
            <a href="#locations" class="nav-link">Locations</a>
        </div>

        <!-- Mobile Toggle -->
        <button class="menu-toggle" aria-label="Toggle Menu">
            <span class="bar"></span>
            <span class="bar"></span>
        </button>
    </div>
</nav>

<style>
    .navbar {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        background: var(--brand-orange);
        height: var(--header-height);
        z-index: 1000;
        display: flex;
        align-items: center;
        box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    }

    .nav-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
    }

    /* Logo Styling */
    .logo-box {
        display: flex;
        align-items: center;
        /* No extra background needed as header is orange, but keeping logo crisp */
    }

    .logo-box img {
        height: 90px; /* Significantly larger for brand impact */
        width: auto;
        /* Ensure distinct visibility */
        filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
    }

    /* Links */
    .nav-menu {
        display: flex;
        gap: 2.5rem;
    }

    .nav-link {
        font-family: var(--font-body);
        font-weight: 700;
        text-transform: uppercase;
        font-size: 0.95rem;
        letter-spacing: 1px;
        color: #000;
        position: relative;
        opacity: 0.85;
        transition: 0.3s;
    }

    .nav-link:hover, .nav-link.active {
        opacity: 1;
    }

    .nav-link::after {
        content: '';
        position: absolute;
        bottom: -4px;
        left: 0;
        width: 0%;
        height: 2px;
        background: #000;
        transition: 0.3s ease;
    }

    .nav-link:hover::after {
        width: 100%;
    }

    /* Mobile Toggle */
    .menu-toggle {
        display: none;
        flex-direction: column;
        gap: 6px;
        background: none;
        border: none;
        cursor: pointer;
    }

    .bar {
        width: 28px;
        height: 3px;
        background-color: #000;
        border-radius: 2px;
    }

    @media (max-width: 900px) {
        .nav-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0,0,0,0.95);
            backdrop-filter: blur(10px);
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 2rem;
            transform: translateY(-100%);
            transition: transform 0.5s cubic-bezier(0.77, 0, 0.175, 1);
            padding: 0;
            z-index: 999; /* Below toggle but above content */
        }

        .navbar.open .nav-menu {
            transform: translateY(0);
        }

        .nav-link {
            font-size: 2rem;
            color: #fff;
            opacity: 0;
            transform: translateY(20px);
            transition: 0.3s;
        }

        .navbar.open .nav-link {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }

        /* Stagger delays for links */
        .navbar.open .nav-link:nth-child(1) { transition-delay: 0.1s; }
        .navbar.open .nav-link:nth-child(2) { transition-delay: 0.2s; }
        .navbar.open .nav-link:nth-child(3) { transition-delay: 0.3s; }
        .navbar.open .nav-link:nth-child(4) { transition-delay: 0.4s; }

        .menu-toggle {
            display: flex;
            z-index: 1001; /* Stay on top */
            position: relative;
        }

        .navbar.open .bar:nth-child(1) {
            transform: rotate(45deg) translate(5px, 6px);
            background: var(--brand-orange);
        }

        .navbar.open .bar:nth-child(2) {
            opacity: 0;
        }
        
        /* We need 3 bars for standard hamburger, but currently have 2 in HTML. 
           Let's assume we might need to add one or adjust. 
           Wait, HTML shows 2 bars? Let's check HTML. 
           Ah, I should check HTML content first or just stick to 2 bar cross.
        */
    }

    /* Fixing the Toggle Animation for 2 bars if that's what we have, or 3. 
       HTML has: 
       <span class="bar"></span>
       <span class="bar"></span>
       
       Let's stick to 2 bars forming an X.
    */
    .navbar.open .bar:nth-child(1) {
        transform: rotate(45deg) translate(5px, 5px);
        background: #fff;
    }
    .navbar.open .bar:nth-child(2) {
        transform: rotate(-45deg) translate(5px, -5px);
        background: #fff;
    }
</style>

<script>
    const toggle = document.querySelector('.menu-toggle');
    const navbar = document.querySelector('.navbar');
    
    if(toggle && navbar) {
        toggle.addEventListener('click', () => {
             // @ts-ignore
            navbar.classList.toggle('open');
        });
    }
</script>
